(window.webpackJsonp=window.webpackJsonp||[]).push([[302],{736:function(e,t,a){"use strict";a.r(t);var i=a(2),n=Object(i.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"part-1-skeleton-code"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#part-1-skeleton-code"}},[e._v("#")]),e._v(" Part 1: Skeleton Code")]),e._v(" "),t("h3",{attrs:{id:"inspect-the-next-step-function-and-describe-in-the-pdf-file-a-workflow-for-the-implemented-odometry-method"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#inspect-the-next-step-function-and-describe-in-the-pdf-file-a-workflow-for-the-implemented-odometry-method"}},[e._v("#")]),e._v(" Inspect the "),t("code",[e._v("next_step")]),e._v(" function and describe in the PDF file a workflow for the implemented odometry method")]),e._v(" "),t("p",[e._v("After "),t("code",[e._v("load_data")]),e._v(", the "),t("code",[e._v("next_step")]),e._v(" function processes frames (each frame consists of an image pair from a stereo camera) in time order (timestamp).")]),e._v(" "),t("p",[e._v("The workflow is as follows:")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("if "),t("code",[e._v("current_frame")]),e._v(" is a keyframe")]),e._v(" "),t("ul",[t("li",[e._v("stereo matching to find inlier correspondences between the two images")]),e._v(" "),t("li",[e._v("project the current landmarks to the image plane using the current locations of the camera")]),e._v(" "),t("li",[e._v("find matches between projected landmarks and detected keypoints in the current keyframe")]),e._v(" "),t("li",[e._v("localize the camera to update keyframe's pose and set it as current pose")]),e._v(" "),t("li",[e._v("add new landmarks from the stereo images")]),e._v(" "),t("li",[e._v("remove old cameras and observations")]),e._v(" "),t("li",[e._v("optimize the active map with bundle adjustment")])])]),e._v(" "),t("li",[t("p",[e._v("else if "),t("code",[e._v("current_frame")]),e._v(" is not a keyframe")]),e._v(" "),t("ul",[t("li",[e._v("no stereo matching, adding new landmarks, and bundle adjustment")]),e._v(" "),t("li",[e._v("landmarks projection, matches finding, and camera localization, and current pose update are still conducted")]),e._v(" "),t("li",[e._v("next frame would be chosen as a keyframe if the current number of inliers from inliers from camera localization is below threshold")])])]),e._v(" "),t("li",[t("p",[e._v("The process continues until all frames are processed")])])]),e._v(" "),t("h2",{attrs:{id:"part-3-optimization"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#part-3-optimization"}},[e._v("#")]),e._v(" Part 3: Optimization")]),e._v(" "),t("h3",{attrs:{id:"what-is-the-difference-to-the-optimize-function-in-src-sfm-cpp-from-the-previous-exercise"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#what-is-the-difference-to-the-optimize-function-in-src-sfm-cpp-from-the-previous-exercise"}},[e._v("#")]),e._v(" What is the difference to the optimize function in "),t("code",[e._v("src/sfm.cpp")]),e._v(" from the previous exercise?")]),e._v(" "),t("ol",[t("li",[e._v("In "),t("code",[e._v("odometry")]),e._v(", bundle adjustment is run in a background thread")]),e._v(" "),t("li",[e._v("In "),t("code",[e._v("odometry")]),e._v(", the function "),t("code",[e._v("optimize")]),e._v(" only optimizes over camera poses and landmark 3D locations in world frame of "),t("strong",[e._v("current keyframes")]),e._v(". However, in "),t("code",[e._v("sfm")]),e._v(", the optimization is done over all frames.")])]),e._v(" "),t("h3",{attrs:{id:"what-is-the-functionality-of-the-variables-opt-finished-and-opt-running-what-will-happen-if-we-remove-them"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#what-is-the-functionality-of-the-variables-opt-finished-and-opt-running-what-will-happen-if-we-remove-them"}},[e._v("#")]),e._v(" What is the functionality of the variables "),t("code",[e._v("opt_finished")]),e._v(" and "),t("code",[e._v("opt_running")]),e._v("? What will happen if we remove them?")]),e._v(" "),t("p",[e._v("These two variables are created as atomic objects, so that inter-thread synchronization is ensured.")]),e._v(" "),t("p",[e._v("We need to use them because optimizing camera poses and landmark locations in current keyframes with bundle adjustment is done in a background thread.")]),e._v(" "),t("p",[e._v("Only after updating these two variables, can a new keyframe be added.")])])}),[],!1,null,null,null);t.default=n.exports}}]);